var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=BottomTabBar;var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireDefault(require("react"));var _reactNative=require("react-native");var _native=require("@react-navigation/native");var _reactNativeSafeAreaContext=require("react-native-safe-area-context");var _BottomTabItem=_interopRequireDefault(require("./BottomTabItem"));var _jsxFileName="/Users/satya/Workspace/Projects/navigation-ex/packages/bottom-tabs/src/views/BottomTabBar.tsx";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){(0,_defineProperty2.default)(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}var DEFAULT_TABBAR_HEIGHT=50;var DEFAULT_MAX_TAB_ITEM_WIDTH=125;function BottomTabBar(_ref){var state=_ref.state,navigation=_ref.navigation,descriptors=_ref.descriptors,activeBackgroundColor=_ref.activeBackgroundColor,activeTintColor=_ref.activeTintColor,_ref$adaptive=_ref.adaptive,adaptive=_ref$adaptive===void 0?true:_ref$adaptive,allowFontScaling=_ref.allowFontScaling,inactiveBackgroundColor=_ref.inactiveBackgroundColor,inactiveTintColor=_ref.inactiveTintColor,_ref$keyboardHidesTab=_ref.keyboardHidesTabBar,keyboardHidesTabBar=_ref$keyboardHidesTab===void 0?false:_ref$keyboardHidesTab,labelPosition=_ref.labelPosition,labelStyle=_ref.labelStyle,showIcon=_ref.showIcon,showLabel=_ref.showLabel,style=_ref.style,tabStyle=_ref.tabStyle;var _useTheme=(0,_native.useTheme)(),colors=_useTheme.colors;var _React$useState=_react.default.useState(_reactNative.Dimensions.get('window')),_React$useState2=(0,_slicedToArray2.default)(_React$useState,2),dimensions=_React$useState2[0],setDimensions=_React$useState2[1];var _React$useState3=_react.default.useState({height:0,width:0}),_React$useState4=(0,_slicedToArray2.default)(_React$useState3,2),layout=_React$useState4[0],setLayout=_React$useState4[1];var _React$useState5=_react.default.useState(false),_React$useState6=(0,_slicedToArray2.default)(_React$useState5,2),keyboardShown=_React$useState6[0],setKeyboardShown=_React$useState6[1];var _React$useState7=_react.default.useState(function(){return new _reactNative.Animated.Value(0);}),_React$useState8=(0,_slicedToArray2.default)(_React$useState7,1),visible=_React$useState8[0];var routes=state.routes;_react.default.useEffect(function(){if(keyboardShown){_reactNative.Animated.timing(visible,{toValue:0,duration:200,useNativeDriver:true}).start();}},[keyboardShown,visible]);_react.default.useEffect(function(){var handleOrientationChange=function handleOrientationChange(_ref2){var window=_ref2.window;setDimensions(window);};var handleKeyboardShow=function handleKeyboardShow(){return setKeyboardShown(true);};var handleKeyboardHide=function handleKeyboardHide(){return _reactNative.Animated.timing(visible,{toValue:1,duration:250,useNativeDriver:true}).start(function(_ref3){var finished=_ref3.finished;if(finished){setKeyboardShown(false);}});};_reactNative.Dimensions.addEventListener('change',handleOrientationChange);if(_reactNative.Platform.OS==='ios'){_reactNative.Keyboard.addListener('keyboardWillShow',handleKeyboardShow);_reactNative.Keyboard.addListener('keyboardWillHide',handleKeyboardHide);}else{_reactNative.Keyboard.addListener('keyboardDidShow',handleKeyboardShow);_reactNative.Keyboard.addListener('keyboardDidHide',handleKeyboardHide);}return function(){_reactNative.Dimensions.removeEventListener('change',handleOrientationChange);if(_reactNative.Platform.OS==='ios'){_reactNative.Keyboard.removeListener('keyboardWillShow',handleKeyboardShow);_reactNative.Keyboard.removeListener('keyboardWillHide',handleKeyboardHide);}else{_reactNative.Keyboard.removeListener('keyboardDidShow',handleKeyboardShow);_reactNative.Keyboard.removeListener('keyboardDidHide',handleKeyboardHide);}};},[visible]);var handleLayout=function handleLayout(e){var _e$nativeEvent$layout=e.nativeEvent.layout,height=_e$nativeEvent$layout.height,width=_e$nativeEvent$layout.width;setLayout(function(layout){if(height===layout.height&&width===layout.width){return layout;}else{return{height:height,width:width};}});};var shouldUseHorizontalLabels=function shouldUseHorizontalLabels(){var isLandscape=dimensions.width>dimensions.height;if(labelPosition){var position;if(typeof labelPosition==='string'){position=labelPosition;}else{position=labelPosition({dimensions:dimensions});}if(position){return position==='beside-icon';}}if(!adaptive){return false;}if(dimensions.width>=768){var maxTabItemWidth=DEFAULT_MAX_TAB_ITEM_WIDTH;var flattenedStyle=_reactNative.StyleSheet.flatten(tabStyle);if(flattenedStyle){if(typeof flattenedStyle.width==='number'){maxTabItemWidth=flattenedStyle.width;}else if(typeof flattenedStyle.maxWidth==='number'){maxTabItemWidth=flattenedStyle.maxWidth;}}return routes.length*maxTabItemWidth<=dimensions.width;}else{return isLandscape;}};return _react.default.createElement(_reactNativeSafeAreaContext.SafeAreaConsumer,{__source:{fileName:_jsxFileName,lineNumber:166}},function(insets){return _react.default.createElement(_reactNative.Animated.View,{style:[styles.tabBar,{backgroundColor:colors.card,borderTopColor:colors.border},keyboardHidesTabBar?{transform:[{translateY:visible.interpolate({inputRange:[0,1],outputRange:[layout.height,0]})}],position:keyboardShown?'absolute':null}:null,{height:DEFAULT_TABBAR_HEIGHT+(insets?insets.bottom:0),paddingBottom:insets?insets.bottom:0},style],pointerEvents:keyboardHidesTabBar&&keyboardShown?'none':'auto',__source:{fileName:_jsxFileName,lineNumber:168}},_react.default.createElement(_reactNative.View,{style:styles.content,onLayout:handleLayout,__source:{fileName:_jsxFileName,lineNumber:199}},routes.map(function(route,index){var focused=index===state.index;var options=descriptors[route.key].options;var onPress=function onPress(){var event=navigation.emit({type:'tabPress',target:route.key});if(!focused&&!event.defaultPrevented){navigation.dispatch(_objectSpread({},_native.CommonActions.navigate(route.name),{target:state.key}));}};var onLongPress=function onLongPress(){navigation.emit({type:'tabLongPress',target:route.key});};var label=options.tabBarLabel!==undefined?options.tabBarLabel:options.title!==undefined?options.title:route.name;var accessibilityLabel=options.tabBarAccessibilityLabel!==undefined?options.tabBarAccessibilityLabel:typeof label==='string'?label+", tab, "+(index+1)+" of "+routes.length:undefined;return _react.default.createElement(_native.NavigationContext.Provider,{key:route.key,value:descriptors[route.key].navigation,__source:{fileName:_jsxFileName,lineNumber:240}},_react.default.createElement(_BottomTabItem.default,{route:route,focused:focused,horizontal:shouldUseHorizontalLabels(),onPress:onPress,onLongPress:onLongPress,accessibilityLabel:accessibilityLabel,testID:options.tabBarTestID,allowFontScaling:allowFontScaling,activeTintColor:activeTintColor,inactiveTintColor:inactiveTintColor,activeBackgroundColor:activeBackgroundColor,inactiveBackgroundColor:inactiveBackgroundColor,button:options.tabBarButton,icon:options.tabBarIcon,label:label,showIcon:showIcon,showLabel:showLabel,labelStyle:labelStyle,style:tabStyle,__source:{fileName:_jsxFileName,lineNumber:244}}));})));});}var styles=_reactNative.StyleSheet.create({tabBar:{left:0,right:0,bottom:0,borderTopWidth:_reactNative.StyleSheet.hairlineWidth,elevation:8},content:{flex:1,flexDirection:'row'}});
//# sourceMappingURL=BottomTabBar.js.map